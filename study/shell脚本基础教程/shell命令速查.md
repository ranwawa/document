# Shell 命令速查

## 文本输出相关

| 命令                             | 含义                     |
| -------------------------------- | ------------------------ |
| echo 'xxx'                       | 输出内容                 |
| echo -n 'xxx'                    | 去掉换行符(no return)    |
| echo -e 'x\nxx'                  | 开启转义字符功能(escape) |
| echo -E 'x\nxx'                  | 同上,取反(escape)        |
| printf 'name:%s age:$d \n' $n $a | 格式化输出内容           |
| printf 'name:%s age:$d \n' $n $a | 格式化输出内容           |

## 目录文件相关

| 命令  | 含义                                        |
| ----- | ------------------------------------------- |
| pwd   | 绝对路径的形式展开当前目录,等同于 echo $PWD |
| cd    | 默认跳转到$HOME                             |
| cd -  | 切换到上个目录,等同于 echo $OLDPWD          |
| ls    | 查看当前目录下的所有文件                    |
| ls -l | 显示详细信息                                |

## 函数相关

| 命令    | 含义                                 |
| ------- | ------------------------------------ |
| shift   | 移出第 1 个位置参数, 后面的依次左移  |
| shift 5 | 移出前面 5 个位置参数,后面的依次左移 |

| 命令      | 含义                         |
| --------- | ---------------------------- |
| printenv  | 查看当前系统中的环境变量列表 |
| export    | 设置环境变量                 |
| locale    | 查看当前地区设置             |
| locale -a | 查看可以使用的国家/地区列表  |
| declare   | 声明变量                     |
| readonly  | 将变量转换成只读             |

## 复制粘贴相关

| 命令              | 含义                          |
| ----------------- | ----------------------------- |
| pbcopy < fileName | `macos`将文件内容复制到剪贴板 |

## 常用信号

| 信号 | 编号 | 说明                                    |
| ---- | ---- | --------------------------------------- |
| HUP  | 1    | 通知进程重启                            |
| INT  | 2    | 进程中断发生(ctrl + c)                  |
| QUIT | 3    | 进程退出, 创建 coredump 文件(ctrl + \ ) |
| TERM | 15   | 进程退出                                |

## 暂未分类

| 命令                        | 含义                                                     |
| --------------------------- | -------------------------------------------------------- |
| 行尾/                       | 用于代码换行                                             |
| #                           | 注释                                                     |
| chmod +x './file'           | 为文件添加可执行权限                                     |
| file './file'               | 判断识别文件类型                                         |
| file './file'               | 判断识别文件类型                                         |
| echo a \| od                | 以 8 进制方式显示内容                                    |
| echo a \| od -a             | 以别名显示内容(对不可见字符很有用)                       |
| :                           | 空命令,退出状态码为 0,用于啥也不干时,类似 JS 中的 void   |
| true                        | 同上                                                     |
| false                       | 同上,退出状态码为 1                                      |
| 命令 1 && 命令 2            | 命令 1 退出状态码为 0,则执行命令 2                       |
| 命令 1 \|\| 命令 2          | 命令 1 退出状态码不为 0,则执行命令 2                     |
| tr b B                      | 将 b 替换成 B                                            |
| cat file                    | 输出文本内容                                             |
| date +%Y-%m-%d              | 输出时间                                                 |
| cal 5 2018                  | 输出 2018 年 5 的日历 月                                 |
| command ls                  | 在内置命令和可执行文件中查找并执行 ls                    |
| builtin ls                  | 在内置命令中查找并执行 ls                                |
| type ls                     | 判断 ls 是什么类型(别名>保留字>函数>内置命令>可执行文件) |
| type -a ls                  | 判断 ls 所有类型                                         |
| set                         | 查询所有变量                                             |
| set -o                      | 查询所有选项及状态                                       |
| set -o verbose              | 开启 shell 选项                                          |
| set +o verbose              | 关闭 shell 选项                                          |
| set 1 2 3                   | 设置并替换位置参数                                       |
| unset name                  | 删除变量                                                 |
| unset -vf name              | 删除变量和函数                                           |
| read name age               | 从标准输入中读取数据赋值给变量                           |
| kill -l                     | 查询所有可用的信号列表                                   |
| trap 'echo signal' INT QUIT | 捕获信号并执行前面的命令                                 |
| ./task1 & ./task2 &         | 并行执行命令                                             |
| ./task1;wait;echo finish    | 等待命令执行完再执行主线程                               |
| exec > file                 | 修改整个进行的重定向位置,避免每次重定向                  |
| exec 命令 参数 ...          | 在当前进程中执行命令,避免 fork 子进程的开销              |
| eval echo \$$1              | 将字符串当命令执行类似 JS 中的 eval                      |

## 字符串处理

| 命令                                     | 含义                                        |
| ---------------------------------------- | ------------------------------------------- |
| grep 正则 输入文件...                    | 查找输入文件中匹配正则的字符,输出到标准输出 |
| grep -E 正则 输入文件...                 | 开启扩展正则功能(extend)                    |
| grep -F 正则 输入文件...                 | 不使用正则                                  |
| grep -i 正则 输入文件...                 | 不区分大小写                                |
| grep -v 正则 输入文件...                 | 对结果取反                                  |
| grep -e 正则 1 -e 正则 2 输入文件...     | 指定多个正则模式                            |
| grep -n 正则 输入文件...                 | 同时输出行号                                |
| grep -H 正则 输入文件...                 | 同时输出文件名                              |
| grep -h 正则 输入文件...                 | 不输出文件名                                |
| grep -l 正则 输入文件...                 | 只输出匹配到的文件名,不饮包含内容           |
| grep -l 正则 输入文件...                 | 只输出没有匹配到的文件名,不饮包含内容       |
| grep -o 正则 输入文件...                 | 只输出匹配到的内容,而不是事整行             |
| sed 脚本 输入文件...                     | 替换字符串                                  |
| sed 's/a/b/g' file                       | 全局 a 替换成 b                             |
| sed '2s/a/b/g' file                      | 第 2 行的 a 替换成 b                        |
| sed '2,8s/a/b/g' file                    | 第 2 到 8 行的 a 替换成 b                   |
| sed '2,$s/a/b/g' file                    | 第 2 到 最后一 行的 a 替换成 b              |
| sed '2,$s/a/b/g' file                    | 第 2 到 最后一 行的 a 替换成 b              |
| sed -r 's/a/b/g' file                    | 开启扩展表达式                              |
| sed -e 's/a/b/g' -e 's/a/b/g' file       | 启用多个脚本                                |
| sed -i .back 's/a/b/g' -e 's/a/b/g' file | 备份 file 到.bak,然后覆盖原文件             |
